!function(a,b,c){}(ALLEX.lib,ALLEX,angular.module("allex.cgi",["ngFileUpload"])),function(a,b,c){c.factory("allex.cgi.UploadMixIn",["Upload",function(b){function c(a,b){this.uploadSettings=angular.extend({},d,b),this._uploadStateM=null,this.uploadURL=null,this.uploadFiles=null}var d={allowDir:!1,multiple:!1,doDrop:!0,accept:null,forget:!0};return c.prototype.__cleanUp=function(){this.uploadSettings=null,this._uploadStateM&&this._uploadStateM.destroy(),this._uploadStateM=null,this.uploadURL=null,this.uploadFiles=null},c.prototype.uploadSetUser=function(a){this._uploadStateM&&this._uploadStateM.destroy(),this._uploadStateM=null,a&&(this._uploadStateM=a.getstateAndAttach({uploadURL:this.set.bind(this,"uploadURL")}))},c.prototype.uploadOnFileDropped=function(){},c.prototype.upload=function(c){var d=a.q.defer();return b.upload({url:this.get("uploadURL"),file:this.get("uploadFiles"),method:"POST",data:c}).progress(this._onUploadProgress.bind(this,d)).success(this._onUploadSuccess.bind(this,d)).error(this._onUploadError.bind(this,d)),d.promise},c.prototype._onUploadProgress=function(a,b){a.notify(parseInt(100*(b.loaded/b.total)))},c.prototype._onUploadSuccess=function(a,b,c,d,e){"ok"===b?(this.uploadSettings.forget&&this.uploadFiles.splice(0,this.uploadFiles.length),a.resolve(this.uploadGetSuccessMessage())):a.reject(b)},c.prototype._onUploadError=function(a,b,c,d,e){a.reject(b)},c.prototype.uploadGetSuccessMessage=function(){return"Successfully done"},c.addMethods=function(b){a.inheritMethods(b,c,"_onUploadProgress","_onUploadSuccess","_onUploadError","uploadOnFileDropped","upload","uploadSetUser","uploadGetSuccessMessage")},c}])}(ALLEX.lib,ALLEX,angular.module("allex.cgi")),function(a,b,c){c.directive("allexCgiUpload",["$compile",function(a){return{restrict:"E",replace:!0,scope:!1,template:'<div data-ng-model="_ctrl.uploadFiles" data-ngf-drag-over-class="dragover" ngf-multiple="{{_ctrl.uploadSettings.multiple}}" ngf-allow-dir="{{_ctrl.uploadSettings.allowDir}}" data-ngf-change="_ctrl.uploadOnFileDropped($files, $event, $rejected)"></div>',link:function(b,c){var d=!1,e=b._ctrl.uploadSettings;e.doDrop&&(c.attr("data-ngf-drop",""),d=!0),e.accept&&(c.attr("data-ngf-accept",e.accept),d=!0),d&&a(c)(b)}}}])}(ALLEX.lib,ALLEX,angular.module("allex.cgi"));